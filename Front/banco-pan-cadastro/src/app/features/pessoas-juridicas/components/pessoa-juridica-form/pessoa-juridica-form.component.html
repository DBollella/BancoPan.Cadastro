<p-card [header]="isEditMode ? 'Editar Pessoa Jurídica' : 'Nova Pessoa Jurídica'">
  <form [formGroup]="form" (ngSubmit)="onSubmit()">

    <!-- Dados Empresariais -->
    <h3>Dados Empresariais</h3>
    <div class="form-grid">
      <div class="field col-12">
        <label for="razaoSocial">Razão Social *</label>
        <input pInputText id="razaoSocial" formControlName="razaoSocial" placeholder="Empresa LTDA" class="w-full" />
        <small class="p-error" *ngIf="form.get('razaoSocial')?.invalid && form.get('razaoSocial')?.touched">
          Razão social é obrigatória
        </small>
      </div>

      <div class="field col-12 md:col-4">
        <label for="email">E-mail *</label>
        <input pInputText id="email" formControlName="email" type="email" placeholder="contato@empresa.com" class="w-full" />
        <small class="p-error" *ngIf="form.get('email')?.invalid && form.get('email')?.touched">
          E-mail válido é obrigatório
        </small>
      </div>

      <div class="field col-12 md:col-4">
        <label for="cnpj">CNPJ *</label>
        <p-inputMask id="cnpj" formControlName="cnpj" mask="99.999.999/9999-99" placeholder="00.000.000/0000-00"
                     [disabled]="isEditMode" styleClass="w-full"></p-inputMask>
        <small class="p-error" *ngIf="form.get('cnpj')?.invalid && form.get('cnpj')?.touched">
          CNPJ válido é obrigatório
        </small>
      </div>

      <div class="field col-12 md:col-4">
        <label for="inscricaoEstadual">Insc. Estadual</label>
        <input pInputText id="inscricaoEstadual" formControlName="inscricaoEstadual" placeholder="123.456.789.012" class="w-full" />
      </div>

      <div class="field col-12 md:col-4">
        <label for="telefone">Telefone</label>
        <p-inputMask id="telefone" formControlName="telefone" mask="(99) 9999-9999"
                     placeholder="(11) 3456-7890" styleClass="w-full"></p-inputMask>
      </div>

      <div class="field col-12 md:col-4">
        <label for="dataAbertura">Data Abertura *</label>
        <p-calendar id="dataAbertura" formControlName="dataAbertura" dateFormat="dd/mm/yy"
                    [showIcon]="true" placeholder="dd/mm/aaaa" styleClass="w-full"></p-calendar>
        <small class="p-error" *ngIf="form.get('dataAbertura')?.invalid && form.get('dataAbertura')?.touched">
          Data de abertura é obrigatória
        </small>
      </div>

      <div class="field col-12 md:col-4">
        <label for="nomeFantasia">Nome Fantasia</label>
        <input pInputText id="nomeFantasia" formControlName="nomeFantasia" placeholder="Empresa" class="w-full" />
      </div>
    </div>

    <p-divider></p-divider>

    <!-- Endereço -->
    <h3>Endereço</h3>
    <div class="form-grid">
      <div class="field col-12 md:col-2">
        <label for="cep">CEP *</label>
        <p-inputMask id="cep" formControlName="cep" mask="99999-999" placeholder="00000-000"
                     (onComplete)="onCepComplete()"
                     [disabled]="loadingCep || isEditMode"
                     styleClass="w-full"></p-inputMask>
        <small class="p-error" *ngIf="form.get('cep')?.invalid && form.get('cep')?.touched">
          CEP é obrigatório
        </small>
      </div>

      <div class="field col-12 md:col-5">
        <label for="logradouro">Logradouro *</label>
        <input pInputText id="logradouro" formControlName="logradouro" [disabled]="isEditMode"
               placeholder="Rua, Avenida..." class="w-full" />
      </div>

      <div class="field col-12 md:col-2">
        <label for="numero">Número *</label>
        <input pInputText id="numero" formControlName="numero" [disabled]="isEditMode"
               placeholder="123" class="w-full" />
      </div>

      <div class="field col-12 md:col-3">
        <label for="complemento">Complemento</label>
        <input pInputText id="complemento" formControlName="complemento" [disabled]="isEditMode"
               placeholder="Sala..." class="w-full" />
      </div>

      <div class="field col-12 md:col-4">
        <label for="bairro">Bairro *</label>
        <input pInputText id="bairro" formControlName="bairro" [disabled]="isEditMode"
               placeholder="Centro" class="w-full" />
      </div>

      <div class="field col-12 md:col-6">
        <label for="localidade">Cidade *</label>
        <input pInputText id="localidade" formControlName="localidade" [disabled]="isEditMode"
               placeholder="São Paulo" class="w-full" />
      </div>

      <div class="field col-12 md:col-2">
        <label for="uf">UF *</label>
        <p-dropdown id="uf" formControlName="uf" [options]="ufs" [disabled]="isEditMode"
                    optionLabel="sigla" optionValue="sigla" placeholder="SP" styleClass="w-full"></p-dropdown>
      </div>

      <div class="field col-12 md:col-3">
        <label for="estado">Estado</label>
        <input pInputText id="estado" formControlName="estado" [disabled]="true" class="w-full" />
      </div>

      <div class="field col-12 md:col-3">
        <label for="regiao">Região</label>
        <input pInputText id="regiao" formControlName="regiao" [disabled]="true" class="w-full" />
      </div>

      <div class="field col-12 md:col-3">
        <label for="ibge">IBGE</label>
        <input pInputText id="ibge" formControlName="ibge" [disabled]="true" class="w-full" />
      </div>

      <div class="field col-12 md:col-3">
        <label for="ddd">DDD</label>
        <input pInputText id="ddd" formControlName="ddd" [disabled]="true" class="w-full" />
      </div>
    </div>

    <div class="actions">
      <p-button label="Cancelar" severity="secondary" [text]="true" (onClick)="cancel()" [disabled]="loading"></p-button>
      <p-button label="Salvar" type="submit" [loading]="loading" [disabled]="loading"></p-button>
    </div>
  </form>
</p-card>
